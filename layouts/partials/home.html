<section class="container centered" style="flex-direction: column">
  <div class="about">
    <h1>{{ .Site.Params.author }}</h1>
    <h2>{{ .Site.Params.info }}</h2>
    {{ with .Site.Params.social }}
    <ul>
      {{ range sort .}}
      <li><a href="{{ .url }}">{{ .name }}</a></li>
      {{ end }}
    </ul>
    {{ end }}
  </div>
  <div style="" id="cats">
    <p>CATS HERE!</p>
  </div>
</section>

<script type="text/babel">
  class CatShow extends React.Component {
    constructor(props) {
      super(props);
      this.state = {catid: 11111}
    }
    componentWillMount() {
      this.interval = setInterval(() => {
        console.log("reloading...");
        this.setState({catid: Math.floor(Math.random() * 100)});
        // fetch("http://thecatapi.com/api/images/get?format=xml&type=gif&size=small",
        //       {mode: 'no-cors'})
        // .then(
        //   (result) => {
        //     console.log('........')
        //     console.log(result);
        //     let responseDoc = new DOMParser().parseFromString(result.body, 'application/xml');
        //     // let caturl = responseDoc.getElementsByTagName(
        //     this.setState({
        //       catUrl: result.headers.location
        //     });
        //   }, (error) => {console.log(error)});
        this.forceUpdate();
      }, 10000);
    }
    // componentDidMount() {
    //   fetch("http://thecatapi.com/api/images/get?format=src&type=gif&size=small",
    //         {mode: 'no-cors'})
    //   .then(
    //     (result) => {
    //       console.log(result);
    //       this.setState({
    //         catUrl: result
    //       });
    //     }, (error) => {console.log(error)});
    // }
    render() {
      var caturl = "http://thecatapi.com/api/images/get?format=src&type=gif&size=small&foo=" + this.state.catid;
      return (
        <img src={caturl}></img>
      );
    }
  }

  ReactDOM.render(<CatShow />, document.getElementById('cats'));
</script>
